/* src/styles/globals.css - Tailwind v4 Centralized Design System */

@import "tailwindcss";

@theme {
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;

  --color-surface-0: #393e50;
  --color-surface-1: #444a5e;
  --color-surface-2: #4f5569;

  --color-border: #52586e;
  --color-border-muted: #444a5e;

  --color-text: #ffffff;
  --color-text-muted: #c5c9d6;
  --color-text-inverted: #393e50;

  --color-accent: #ff9da0;
  --color-accent-hover: #fff4cc;
  --color-accent-muted: rgba(255, 157, 160, 0.15);

  --color-info: #ccd1ff;
  --color-success: #ccffda;
  --color-warning: #fff4cc;
  --color-error: #ff9da0;

  --text-h1: 1.8rem;
  --text-h2: 1.6rem;
  --text-h3: 1.4rem;
  --text-h4: 1.2rem;
  --text-body: 1rem;
  --text-small: 0.875rem;

  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;

  --radius: 0.5rem;
  --radius-lg: 0.75rem;

  --shadow: 0 8px 24px -4px rgba(0, 0, 0, 0.25);
}

@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
@keyframes slide-up { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

@layer base {
  html { font-size: 16px; line-height: 1.5; -webkit-font-smoothing: antialiased; scroll-behavior: smooth; }
  body { background-color: var(--color-surface-0); color: var(--color-text); font-size: var(--text-body); min-height: 100vh; }

  h1 { font-size: var(--text-h1); font-weight: 700; margin-top: 2rem; margin-bottom: 1rem; }
  h2 { font-size: var(--text-h2); font-weight: 500; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 2px solid var(--color-border); scroll-margin-top: 5rem; }
  h3 { font-size: var(--text-h3); font-weight: 400; margin-top: 1.5rem; margin-bottom: 1rem; scroll-margin-top: 5rem; }
  h4 { font-size: var(--text-h4); font-weight: 300; margin-top: 1rem; margin-bottom: 1rem; scroll-margin-top: 5rem; }
  :is(h1, h2, h3, h4):first-child { margin-top: 0; }

  p { margin-bottom: 1rem; }
  p:last-child { margin-bottom: 0; }

  ul, ol { margin-bottom: 1rem; padding-left: 2rem; }
  ul { list-style-type: disc; }
  ol { list-style-type: decimal; }
  li { margin-bottom: 0.25rem; }
  li:last-child { margin-bottom: 0; }
  :is(ul, ol) :is(ul, ol) { margin-top: 0.25rem; margin-bottom: 0; }

  a { color: var(--color-accent); text-decoration: none; }
  a:hover { color: var(--color-accent-hover); }

  code { font-size: 0.9em; padding: 0.125rem 0.375rem; background: var(--color-surface-2); border-radius: var(--radius); }
  pre { font-size: var(--text-body); background: var(--color-surface-1); border: 1px solid var(--color-border-muted); border-radius: var(--radius-lg); padding: var(--space-md); overflow-x: auto; code { padding: 0; background: none; } }
  blockquote { border-left: 4px solid var(--color-accent); padding-left: var(--space-md); padding-block: var(--space-xs); font-style: italic; color: var(--color-text-muted); }

  table { width: 100%; border-collapse: collapse; margin: 1rem 0; border-radius: var(--radius-lg); overflow: hidden; }
  th, td { border: 1px solid var(--color-border-muted); padding: 0.5rem 0.75rem; text-align: left; vertical-align: top; }
  th { background: var(--color-surface-1); font-weight: 600; }
  td { background: var(--color-surface-2); }
  tr:first-child :is(th, td):first-child { border-top-left-radius: var(--radius); }
  tr:first-child :is(th, td):last-child { border-top-right-radius: var(--radius); }
  tr:last-child td:first-child { border-bottom-left-radius: var(--radius); }
  tr:last-child td:last-child { border-bottom-right-radius: var(--radius); }
  tr:hover td { background: rgba(255,255,255,0.05); }

  ::selection { background-color: var(--color-accent-muted); color: var(--color-text); }
  :focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }
  
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: var(--color-surface-1); }
  ::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--color-text-muted); }

  input, textarea, select { font: inherit; color: inherit; }
  hr { border: none; border-top: 1px solid var(--color-border-muted); }

  /* Tiptap editor-specific overrides */
  .tiptap-editor .tiptap {
    outline: none;
    p { margin-bottom: 0.75rem; }
    h2, h3 { font-weight: 600; border-bottom: none; }
    h2 { margin-top: 1.5rem; margin-bottom: 0.75rem; }
    h3 { margin-top: 1rem; margin-bottom: 0.5rem; }
    ul, ol { padding-left: 1.5rem; margin-bottom: 0.75rem; }
    blockquote { margin-block: 0.75rem; padding-block: 0; }
    a { text-decoration: underline; text-underline-offset: 2px; }
    p.is-editor-empty:first-child::before { content: attr(data-placeholder); float: left; color: var(--color-text-muted); opacity: 0.6; pointer-events: none; height: 0; }
    .selectedCell { background: var(--color-accent-muted) !important; }
    &.ProseMirror-selectednode .iframe-embed { outline: 2px solid var(--color-accent); outline-offset: 2px; border-radius: var(--radius-lg); }
  }

  /* Shared media styles for editor and rendered content */
  :is(.tiptap-editor .tiptap, .prose-content) {
    img { max-width: 100%; height: auto; border-radius: var(--radius-lg); margin: 1rem 0; &.ProseMirror-selectednode { outline: 2px solid var(--color-accent); outline-offset: 2px; } }
    div[data-youtube-video] { position: relative; width: 100%; margin: 1rem 0; &::before { content: ''; display: block; padding-top: 56.25%; } iframe { position: absolute; top: 0; left: 0; width: 100% !important; height: 100% !important; border-radius: var(--radius-lg); } &.ProseMirror-selectednode iframe { outline: 2px solid var(--color-accent); outline-offset: 2px; } }
    .iframe-embed { position: relative; width: 100%; margin: 1rem 0; min-height: 400px; iframe { width: 100%; height: 400px; border: 1px solid var(--color-border-muted); border-radius: var(--radius-lg); background: var(--color-surface-1); } }
  }
}

@layer components {
  .stack { display: flex; flex-direction: column; gap: var(--space-md); }
  .stack-xs { display: flex; flex-direction: column; gap: var(--space-xs); }
  .stack-sm { display: flex; flex-direction: column; gap: var(--space-sm); }
  .stack-lg { display: flex; flex-direction: column; gap: var(--space-lg); }
  .row { display: flex; align-items: center; gap: var(--space-sm); }
  .row-md { display: flex; align-items: center; gap: var(--space-md); }
  .spread { display: flex; align-items: center; justify-content: space-between; gap: var(--space-md); flex-wrap: wrap; }
  .center { display: flex; align-items: center; justify-content: center; }

  .text-muted { color: var(--color-text-muted); }
  .text-small { font-size: var(--text-small); }

  .surface, .surface-interactive { background: var(--color-surface-1); border: 1px solid var(--color-border-muted); border-radius: var(--radius-lg); }
  .surface-interactive { transition: border-color 0.15s, transform 0.15s, box-shadow 0.15s; &:hover { border-color: var(--color-accent); transform: translateY(-2px); box-shadow: var(--shadow); } }
  .panel { background: var(--color-surface-0); border: 1px solid var(--color-border-muted); border-radius: var(--radius-lg); padding: var(--space-lg); }

  .icon-btn { padding: var(--space-sm); border-radius: var(--radius); transition: background-color 0.15s; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; &:hover { background: var(--color-surface-2); } }

  .input { width: 100%; padding: var(--space-sm) var(--space-md); background: var(--color-surface-0); border: 1px solid var(--color-border); border-radius: var(--radius); transition: border-color 0.15s, box-shadow 0.15s; &:focus { outline: none; border-color: var(--color-accent); box-shadow: 0 0 0 2px var(--color-accent-muted); } &::placeholder { color: var(--color-text-muted); opacity: 0.6; } }
  .input-ghost { width: 100%; background: transparent; border: none; outline: none; &::placeholder { color: var(--color-text-muted); opacity: 0.6; } }

  .callout { display: flex; gap: var(--space-md); padding: var(--space-md); border-radius: var(--radius-lg); border: 1px solid rgba(204, 209, 255, 0.3); background: rgba(204, 209, 255, 0.1); }

  .dropdown { position: absolute; right: 0; top: 100%; margin-top: var(--space-sm); min-width: 12rem; background: var(--color-surface-1); border: 1px solid var(--color-border); border-radius: var(--radius); box-shadow: var(--shadow); padding: var(--space-xs) 0; z-index: 50; }
  .dropdown-item { width: 100%; display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm) var(--space-md); text-align: left; transition: background-color 0.15s; &:hover { background: var(--color-surface-2); } }

  .badge { display: inline-flex; align-items: center; padding: 0.125rem var(--space-sm); font-size: var(--text-small); font-weight: 500; border-radius: 9999px; background: var(--color-surface-2); color: var(--color-text-muted); }
  .badge-accent { background: var(--color-accent-muted); color: var(--color-accent); }

  .skeleton { background: var(--color-surface-1); border-radius: var(--radius-lg); animation: pulse 2s infinite; }
  .sticky-card { position: sticky; top: 5rem; }
  .link-muted { color: var(--color-text-muted); &:hover { color: var(--color-text); } }

  /* Banner image with 8:1 aspect ratio crop */
  .banner-container { 
    position: relative; 
    width: 100%; 
    aspect-ratio: 8 / 1; 
    overflow: hidden;
    background: var(--color-surface-1);
    border-radius: var(--radius-lg);
  }
  .banner-image { 
    width: 100%; 
    height: 100%; 
    object-fit: cover; 
    object-position: center;
  }
  .banner-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--color-surface-1) 0%, var(--color-surface-2) 100%);
  }
  .banner-overlay {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: var(--space-lg);
    background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
    color: var(--color-text);
    gap: var(--space-sm);
    h1 { text-shadow: 0 2px 8px rgba(0,0,0,0.5); }
    nav { a, span { color: rgba(255,255,255,0.8); &:hover { color: white; } } }
  }
}

radix-connect-button {
  --radix-connect-button-background: var(--color-accent);
  --radix-connect-button-background-hover: var(--color-accent-hover);
  --radix-connect-button-text: var(--color-text-inverted);
  --radix-connect-button-border-radius: var(--radius);
}