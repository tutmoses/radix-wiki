/* src/styles/globals.css - Tailwind v4 Centralized Design System */

@import "tailwindcss";

@theme {
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
  --color-surface-0: #393e50;
  --color-surface-1: #444a5e;
  --color-surface-2: #4f5569;
  --color-border: #52586e;
  --color-border-muted: #444a5e;
  --color-text: #ffffff;
  --color-text-muted: #c5c9d6;
  --color-text-inverted: #393e50;
  --color-accent: #ff9da0;
  --color-accent-hover: #fff4cc;
  --color-accent-muted: rgba(255, 157, 160, 0.15);
  --color-info: #ccd1ff;
  --color-success: #ccffda;
  --color-warning: #fff4cc;
  --color-error: #ff9da0;
  --color-danger: #ffc599;
  --color-danger-muted: rgba(255, 197, 153, 0.12);
  --color-info-muted: rgba(204, 209, 255, 0.12);
  --color-purple: #d8ccff;
  --text-h1: 1.8rem;
  --text-h2: 1.6rem;
  --text-h3: 1.4rem;
  --text-h4: 1.2rem;
  --text-small: 0.875rem;
  --radius: 0.5rem;
  --radius-lg: 0.75rem;
  --shadow: 0 8px 24px -4px rgba(0, 0, 0, 0.25);
  --header-height: 4rem;
  --sidebar-width: 18rem;
}

@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
@keyframes slide-up { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes spin { to { transform: rotate(360deg); } }

@layer base {
  html { font-size: 16px; line-height: 1.5; -webkit-font-smoothing: antialiased; scroll-behavior: smooth; }
  body { @apply bg-surface-0 text-text text-base min-h-screen; }

  h1, h2, h3, h4 { &:first-child { @apply mt-0; } }
  h1 { @apply text-h1 font-bold mt-8 mb-4; }
  h2 { @apply text-h2 font-semibold mt-8 mb-4 border-b-2 border-border scroll-mt-[calc(var(--header-height)+1rem)]; }
  h3 { @apply text-h3 font-normal mt-6 mb-4 scroll-mt-[calc(var(--header-height)+1rem)]; }
  h4 { @apply text-h4 font-light mt-4 mb-4 scroll-mt-[calc(var(--header-height)+1rem)]; }

  p { @apply mb-4 last:mb-0; }
  ul, ol { @apply mb-4 pl-8; :is(ul, ol) { @apply mt-1 mb-0; } }
  ul { list-style-type: disc; }
  ol { list-style-type: decimal; }
  li { @apply mb-1 last:mb-0; }

  a { @apply text-accent no-underline hover:text-accent-hover; }
  code { @apply text-[0.9em] px-1.5 py-0.5 bg-surface-2 rounded; }
  pre { @apply text-base border border-border-muted rounded-lg p-4 overflow-x-auto; background-color: #24292e; code { @apply p-0 bg-transparent; } }
  blockquote { @apply border-l-4 border-accent pl-4 py-1 italic text-text-muted; }

  table { @apply w-full border-collapse rounded-lg overflow-hidden; }
  th, td { border: 1px solid var(--color-border-muted); @apply py-2 px-3 text-left align-top; }
  th { @apply bg-surface-1 font-semibold; }
  td { @apply bg-surface-2; }
  tr:first-child :is(th, td):first-child { border-top-left-radius: var(--radius); }
  tr:first-child :is(th, td):last-child { border-top-right-radius: var(--radius); }
  tr:last-child td:first-child { border-bottom-left-radius: var(--radius); }
  tr:last-child td:last-child { border-bottom-right-radius: var(--radius); }
  tr:hover td { @apply bg-white/5; }

  ::selection { @apply bg-accent-muted text-text; }
  :focus-visible { @apply outline-2 outline-accent outline-offset-2; }

  * { scrollbar-width: none; }
  ::-webkit-scrollbar { @apply hidden; }

  input, textarea, select { font: inherit; color: inherit; }
  hr { @apply border-0 border-t border-border-muted; }
  pre { @apply whitespace-pre-wrap break-words; }

  /* Tiptap editor */
  .tiptap-editor .tiptap {
    @apply outline-none;
    p { @apply mb-3; }
    h2, h3 { @apply font-semibold border-b-0; }
    h2 { @apply mt-6 mb-3; }
    h3 { @apply mt-4 mb-2; }
    ul, ol { @apply pl-6 mb-3; }
    blockquote { @apply my-3 py-0; }
    a { @apply underline underline-offset-2; }
    pre { background-color: #24292e; }
    p.is-editor-empty:first-child::before { content: attr(data-placeholder); @apply float-left text-text-muted opacity-60 pointer-events-none h-0; }
    .selectedCell { @apply bg-accent-muted; }
    &.ProseMirror-selectednode .iframe-embed { @apply outline-2 outline-accent outline-offset-2 rounded-lg; }
  }

  :is(.tiptap-editor .tiptap, .prose-content) {
    img { @apply max-w-full h-auto rounded-lg my-4; &.ProseMirror-selectednode { @apply outline-2 outline-accent outline-offset-2; } }
    div[data-youtube-video] { @apply relative w-full my-4; &::before { content: ''; @apply block pt-[56.25%]; } iframe { @apply absolute inset-0 w-full! h-full! rounded-lg; } &.ProseMirror-selectednode iframe { @apply outline-2 outline-accent outline-offset-2; } }
    .iframe-embed { @apply relative w-full my-4; iframe { @apply w-full border border-border-muted rounded-lg bg-surface-1; } }
    .twitter-embed { @apply my-4 w-fit max-w-full; iframe { @apply w-[550px] max-w-full border-0 rounded-lg min-h-[200px]; } }
    .map-embed { @apply relative w-full my-4; &::before { content: ''; @apply block pt-[56.25%]; } iframe { @apply absolute inset-0 w-full! h-full! rounded-lg border border-border-muted; } &.ProseMirror-selectednode { @apply outline-2 outline-accent outline-offset-2 rounded-lg; } }
  }

  /* Code block with language selector */
  .code-block-wrapper { @apply relative my-4; pre { @apply m-0 border border-border-muted rounded-lg p-4 pr-24; background-color: #24292e; } code { @apply bg-transparent p-0; } }

  /* Tabs - consolidated */
  [data-tabs] {
    .tabs-list { @apply flex gap-1 border-b border-border-muted mb-4; }
    .tab-button { @apply py-2 px-4 bg-transparent border-b-2 border-transparent text-text-muted cursor-pointer transition-all hover:text-text; &.active { @apply text-accent border-accent; } }
    .tab-panel, [data-tab-item] { @apply hidden; &.active { @apply block; } }
  }
  .tabs-editor {
    @apply border border-border-muted rounded-lg overflow-hidden;
    .tabs-list { @apply flex items-center gap-1 p-2 bg-surface-1 border-b border-border-muted mb-0; }
    .tab-button-edit { @apply flex items-center gap-1 py-1 px-2 bg-surface-2 rounded border border-transparent; &.active { @apply bg-accent-muted border-accent; } }
    .tab-title-input { @apply bg-transparent border-0 outline-none w-24 text-small text-text placeholder:text-text-muted; }
    .tab-remove { @apply p-0.5 rounded-sm text-text-muted cursor-pointer hover:text-error hover:bg-surface-2; }
    .tab-add { @apply py-1 px-2 text-text-muted cursor-pointer rounded hover:text-accent hover:bg-surface-2; }
    .tabs-content { @apply p-4; }
  }
  [data-tabs][data-active-tab="0"] [data-tab-item]:nth-of-type(1),
  [data-tabs][data-active-tab="1"] [data-tab-item]:nth-of-type(2),
  [data-tabs][data-active-tab="2"] [data-tab-item]:nth-of-type(3),
  [data-tabs][data-active-tab="3"] [data-tab-item]:nth-of-type(4),
  [data-tabs][data-active-tab="4"] [data-tab-item]:nth-of-type(5),
  [data-tabs][data-active-tab="5"] [data-tab-item]:nth-of-type(6) { @apply block; }

  /* KaTeX math */
  .katex-display { @apply my-4 overflow-x-auto overflow-y-hidden; }
  .katex { @apply text-text; }

  /* rehype-pretty-code blocks */
  [data-rehype-pretty-code-figure] { @apply my-4; pre { @apply border border-border-muted rounded-lg p-4; background-color: #24292e; } code { @apply p-0 bg-transparent; } }

  /* Copy button on code blocks */
  .code-copy-btn {
    @apply absolute top-2 right-2 p-1.5 rounded bg-white/10 text-text-muted opacity-0 transition-all cursor-pointer hover:bg-white/20 hover:text-text z-10;
  }
  pre:hover > .code-copy-btn,
  .code-block-wrapper:hover > .code-copy-btn { @apply opacity-100; }

  /* ===== CALLOUTS / ADMONITIONS ===== */
  [data-callout] {
    @apply flex gap-3 p-4 rounded-lg border my-4;
    &::before { @apply text-lg leading-none shrink-0 mt-0.5; }
  }
  [data-callout="info"], [data-callout="note"] {
    @apply border-info/30 bg-info/10;
    &::before { content: 'â„¹'; @apply text-info; }
  }
  [data-callout="tip"] {
    @apply border-success/30 bg-success/10;
    &::before { content: 'ðŸ’¡'; }
  }
  [data-callout="warning"], [data-callout="caution"] {
    @apply border-warning/30 bg-warning/10;
    &::before { content: 'âš '; @apply text-warning; }
  }
  [data-callout="danger"], [data-callout="error"] {
    @apply border-error/30 bg-error/10;
    &::before { content: 'ðŸš¨'; }
  }
  [data-callout] > div { @apply flex-1 min-w-0; p:last-child { @apply mb-0; } }
  [data-callout-title] { @apply font-semibold mb-1; }

  /* ===== CODE TABS ===== */
  .code-tabs { @apply border border-border-muted rounded-lg overflow-hidden my-4; }
  .code-tabs-list { @apply flex gap-0 border-b border-border-muted; background-color: #1e2228; }
  .code-tabs-btn { @apply px-4 py-2 text-small text-text-muted border-b-2 border-transparent transition-colors cursor-pointer hover:text-text; background: transparent; }
  .code-tabs-btn-active { @apply text-accent border-accent; }
  .code-tabs pre { @apply m-0 border-0 rounded-none; }

  /* ===== STEP-BY-STEP GUIDES ===== */
  [data-steps] {
    @apply list-none pl-0 mb-4;
    counter-reset: step;
    > li {
      @apply relative pl-12 pb-6 border-l-2 border-border-muted ml-4 last:border-l-0 last:pb-0;
      counter-increment: step;
      &::before {
        content: counter(step);
        @apply absolute -left-[17px] top-0 w-8 h-8 rounded-full bg-accent text-text-inverted text-sm font-bold flex items-center justify-center;
      }
      > *:first-child { @apply mt-0; }
    }
  }
}

@layer components {
  /* ===== SKIP LINK ===== */
  .skip-link {
    @apply absolute -top-full left-4 z-50 px-4 py-2 bg-accent text-surface-0 rounded-b font-semibold text-sm;
    &:focus { @apply top-0; }
  }

  /* ===== LAYOUT ===== */
  .stack { @apply flex flex-col gap-4; }
  .stack-xs { @apply flex flex-col gap-1; }
  .stack-sm { @apply flex flex-col gap-2; }
  .row { @apply flex items-center gap-2; }
  .row-md { @apply flex items-center gap-4; }
  .spread { @apply flex items-center justify-between gap-4 flex-wrap; }
  .center { @apply flex items-center justify-center; }

  /* ===== SURFACES ===== */
  .surface { @apply bg-surface-1 border border-border-muted rounded-lg; }
  .surface-interactive { @apply bg-surface-1 border border-border-muted rounded-lg transition-all hover:border-accent hover:-translate-y-0.5 hover:shadow; }

  /* ===== FORM CONTROLS ===== */
  .icon-btn { @apply p-2 rounded transition-colors cursor-pointer inline-flex items-center justify-center hover:bg-surface-2; }
  .input { @apply w-full py-2 px-4 bg-surface-0 border border-border rounded transition-all focus:outline-none focus:border-accent focus:ring-2 focus:ring-accent-muted placeholder:text-text-muted placeholder:opacity-60; }
  .input-ghost { @apply w-full bg-transparent border-0 outline-none placeholder:text-text-muted placeholder:opacity-60; }

  /* ===== DROPDOWN ===== */
  .dropdown { @apply absolute right-0 top-full mt-2 min-w-48 bg-surface-1 border border-border rounded shadow py-1 z-50; }
  .dropdown-item { @apply w-full flex items-center gap-2 py-2 px-4 text-left transition-colors hover:bg-surface-2; }

  /* ===== BADGES ===== */
  .badge { @apply inline-flex items-center py-0.5 px-2 text-small font-medium rounded-full bg-surface-2 text-text-muted; }
  .badge-accent { @apply bg-accent-muted text-text border border-accent/25; }
  .badge-info { @apply bg-info-muted text-info border border-info/25; }
  .badge-success { @apply bg-success/12 text-success border border-success/25; }
  .badge-warning { @apply bg-warning/12 text-warning border border-warning/25; }
  .badge-danger { @apply bg-danger-muted text-danger border border-danger/25; }

  /* ===== SKELETON / LOADING ===== */
  .skeleton { @apply bg-surface-1 rounded-lg animate-pulse; }
  .spinner { @apply inline-block rounded-full border-2 border-current border-t-transparent animate-[spin_0.6s_linear_infinite]; }

  /* ===== LINKS ===== */
  .link-muted { @apply text-text-muted hover:text-text; }

  /* ===== APP SHELL (layout.tsx) ===== */
  .app-main { @apply min-h-[calc(100dvh-var(--header-height))] flex-1 min-w-0 transition-all duration-200; }
  .app-content { @apply px-4 sm:px-6 lg:px-8 py-6 sm:py-8; }

  /* ===== HEADER ===== */
  .header { @apply sticky top-0 z-50 bg-surface-0/80 backdrop-blur-md border-b border-border-muted; }
  .header-inner { @apply w-full px-4 sm:px-6 lg:px-8; }
  .header-bar { @apply flex items-center gap-2 h-[var(--header-height)]; }
  .logo-text { @apply font-semibold text-lg hidden sm:block; }
  .header-actions { @apply flex items-center gap-2 ml-auto; }

  /* User pill (connected state) */
  .user-pill { @apply flex items-center gap-2 bg-surface-1 border border-border-muted rounded-lg px-2 sm:px-3 py-1.5 hover:bg-surface-2 transition-colors; }
  .user-dot { @apply w-2 h-2 rounded-full bg-success; }

  /* User avatar */
  .user-avatar { @apply rounded-full shrink-0; }
  .user-avatar-sm { @apply w-5 h-5; }
  .user-avatar-md { @apply w-7 h-7; }
  .user-avatar-lg { @apply w-10 h-10; }

  /* ===== SEARCH ===== */
  .search-panel { @apply pb-4 animate-[slide-up_0.3s_ease-out]; }
  .search-icon-left { @apply absolute left-3 top-1/2 -translate-y-1/2 text-text-muted; }
  .search-icon-right { @apply absolute right-3 top-1/2 -translate-y-1/2 text-text-muted animate-spin; }
  .search-results { @apply absolute top-full left-0 right-0 mt-2 bg-surface-1 border border-border rounded-lg shadow overflow-hidden z-50; }
  .search-result { @apply w-full flex items-center gap-2 p-3 hover:bg-surface-2 transition-colors text-left; }
  .search-empty { @apply absolute top-full left-0 right-0 mt-2 bg-surface-1 border border-border rounded-lg shadow p-4 text-center text-text-muted z-50; }

  /* ===== SIDEBAR ===== */
  .sidebar { @apply sticky top-[var(--header-height)] h-[calc(100dvh-var(--header-height))] bg-surface-0 border-r border-border-muted shrink-0 transition-all duration-200 overflow-hidden; }
  .sidebar-scroll { @apply flex flex-col h-full overflow-y-auto w-[var(--sidebar-width)] pb-24; }
  .sidebar-label { @apply text-small text-text-muted font-bold uppercase tracking-wide px-3; }

  /* Nav items */
  .nav-item { @apply flex items-center gap-2 px-3 py-2 rounded-md transition-colors text-text-muted hover:bg-surface-2 hover:text-text; }
  .nav-indent { @apply inline-flex items-center justify-center w-6 shrink-0; }
  .nav-link { @apply flex-1 flex items-center gap-2 px-2 py-1.5 rounded-md transition-colors text-text-muted hover:bg-surface-2 hover:text-text; }

  /* Table of contents */
  .toc-btn { @apply flex items-center gap-2 px-3 py-2 text-text-muted hover:text-text transition-colors w-full; }
  .toc-label { @apply text-small font-medium uppercase tracking-wide; }
  .toc-item { @apply text-left text-small text-text-muted hover:text-accent transition-colors py-1 px-2 rounded truncate; }

  /* ===== BANNER ===== */
  .banner-container { @apply relative w-full aspect-[4/1] max-h-48 overflow-hidden bg-surface-1 rounded-lg; }
  .banner-image { @apply w-full h-full object-cover object-center; }
  .banner-placeholder { @apply w-full h-full bg-linear-to-br from-surface-1 to-surface-2; }
  .banner-overlay { @apply absolute inset-0 flex flex-col justify-end p-3 sm:p-4 lg:p-6 bg-linear-to-t from-black/80 via-black/40 to-transparent text-text gap-1 sm:gap-2; h1 { @apply text-base sm:text-h3 lg:text-h1 leading-tight; text-shadow: 0 2px 8px rgba(0,0,0,0.5); } nav { @apply text-xs sm:text-small font-medium; text-shadow: 0 1px 4px rgba(0,0,0,0.6); a, span { @apply text-white/90 hover:text-white; } } }
  .banner-empty { @apply relative w-full aspect-[4/1] max-h-48 overflow-hidden bg-surface-1 rounded-lg border-2 border-dashed border-border-muted bg-surface-1/50; }
  .banner-upload-btn { @apply w-full h-full flex items-center justify-center text-text-muted hover:text-text hover:bg-surface-2/50 transition-colors; }
  .banner-actions { @apply absolute top-2 right-2 flex items-center gap-2 z-10; }
  .banner-action-btn { @apply p-2 rounded transition-colors cursor-pointer inline-flex items-center justify-center hover:bg-surface-2 bg-surface-0/80 backdrop-blur-sm; }

  /* ===== PAGE CARD ===== */
  .page-card { @apply bg-surface-1 border border-border-muted rounded-lg transition-all hover:border-accent hover:-translate-y-0.5 hover:shadow h-full overflow-hidden; }
  .page-card-thumb { @apply aspect-[4/1] overflow-hidden relative; }

  .page-card-body { @apply flex flex-col gap-2 p-4; }
  .page-card-title { @apply font-medium transition-colors truncate; .group:hover & { @apply text-accent; } }
  .page-card-excerpt { @apply text-text-muted line-clamp-2 text-small; }
  .page-card-meta { @apply flex items-center gap-2 flex-wrap mt-auto pt-1; }
  .page-card-compact { @apply flex items-center gap-2 p-3 bg-surface-1 border border-border-muted rounded-lg hover:bg-surface-2 transition-colors; }

  /* ===== STATUS CARD ===== */
  .status-icon { @apply flex items-center justify-center w-16 h-16 rounded-2xl bg-surface-2 text-text-muted; }

  /* ===== PAGE NAV ===== */
  .page-nav { @apply pt-8 border-t border-border grid grid-cols-2 gap-4; }
  .page-nav-link { @apply flex flex-col gap-2 p-4 rounded-lg bg-surface-1 hover:bg-surface-2 transition-colors; }
  .page-nav-label { @apply flex items-center gap-2 text-text-muted text-small; }
  .page-nav-title { @apply font-medium transition-colors line-clamp-1; .group:hover & { @apply text-accent; } }

  /* ===== SECTION DIVIDER ===== */
  .section-divider { @apply pt-6 border-t border-border; }

  /* ===== CATEGORY HERO ===== */
  .category-hero { @apply flex flex-col gap-4 pb-4 border-b border-border-muted; }
  .category-hero-grid { @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3; }
  .category-hero-card { @apply flex flex-col gap-1 p-4 bg-surface-1 border border-border-muted rounded-lg transition-all hover:border-accent hover:-translate-y-0.5 hover:shadow; }

  /* ===== CATEGORY GRID ===== */
  .category-grid { @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4; }

  /* ===== STAT GRID ===== */
  .stat-grid { @apply grid grid-cols-2 sm:grid-cols-5 gap-3; }
  .stat-card { @apply flex flex-col gap-1 items-center p-3 bg-surface-1 rounded-lg; }
  .stat-value { @apply text-h4 font-semibold; }

  /* ===== SCORE RING ===== */
  .score-ring { @apply flex flex-col gap-4 items-center p-4 bg-surface-1 rounded-xl; }

  /* ===== TOOLBAR (editor) ===== */
  .toolbar { @apply sticky top-[var(--header-height)] z-40 flex flex-wrap gap-0.5 p-1 bg-surface-1 border border-border-muted rounded-md mb-2; }
  .toolbar-btn { @apply p-1.5 rounded transition-colors text-text-muted hover:bg-surface-2 hover:text-text; }
  .toolbar-divider { @apply w-px h-6 bg-border-muted mx-1 self-center; }

  /* ===== TIPTAP FIELD ===== */
  .tiptap-field { @apply bg-surface-0 border border-border rounded-md p-3 min-h-20 focus-within:border-accent focus-within:ring-2 focus-within:ring-accent-muted; }
  .tiptap-field-disabled { @apply opacity-50 pointer-events-none; }

  /* ===== BLOCK EDITOR ===== */
  .edit-wrapper { @apply flex flex-col gap-4 bg-surface-1 border border-border-muted rounded-lg p-4 border-dashed; }
  .edit-wrapper-label { @apply flex items-center gap-2 text-text-muted; }

  .block-wrapper { @apply relative p-4 rounded-lg border border-border-muted hover:border-border transition-colors; }
  .block-wrapper-container { @apply bg-surface-1/30; }
  .block-wrapper-compact { @apply relative p-3 rounded-md border border-transparent hover:border-border-muted hover:bg-surface-2/50 transition-colors; }
  .block-label { @apply flex items-center gap-2 text-text-muted; }
  .block-label-text { @apply text-small font-medium uppercase; }
  .block-actions { @apply flex items-center gap-2 opacity-0 transition-opacity; .group:hover & { @apply opacity-100; } }

  .insert-btn { @apply flex items-center gap-2 text-text-muted hover:text-text border border-dashed border-border-muted hover:border-border rounded-md transition-colors px-3 py-1.5; }

  .column-editor { @apply flex-1 flex flex-col gap-2 p-3 bg-surface-1/50 border border-dashed border-border-muted rounded-lg; }
  .column-header { @apply text-small text-text-muted uppercase tracking-wide; }

  .block-unknown { @apply rounded border border-warning/50 bg-warning/10; }

  /* ===== TOGGLE OPTIONS (gap/align pickers) ===== */
  .toggle-group { @apply flex items-center gap-4 p-3 bg-surface-2 rounded-lg; }
  .toggle-group-sm { @apply flex items-center gap-1 p-1 bg-surface-2 rounded-md; }
  .toggle-option { @apply px-3 py-1 rounded-md border border-border hover:bg-surface-2 capitalize; }
  .toggle-option-sm { @apply p-1.5 rounded text-text-muted cursor-pointer transition-colors hover:text-text; }

  /* ===== CODE BLOCK LANG SELECTOR ===== */
  .lang-btn { @apply flex items-center gap-1 px-2 py-1 bg-surface-2/80 hover:bg-surface-2 rounded text-xs text-text-muted hover:text-text transition-colors backdrop-blur-sm; }
  .lang-dropdown { @apply absolute top-full right-0 mt-1 bg-surface-1 border border-border rounded shadow-lg max-h-48 overflow-y-auto min-w-28 z-50; }
  .lang-option { @apply w-full px-3 py-1.5 text-left text-xs hover:bg-surface-2 transition-colors flex items-center justify-between; }

  /* ===== METADATA FIELDS ===== */
  .metadata-panel { @apply flex flex-col gap-2 p-4 rounded-lg bg-surface-1 border border-border; }
  .metadata-grid { @apply grid grid-cols-1 md:grid-cols-2 gap-4; }
  .rich-input { @apply w-full py-2 px-4 bg-surface-0 border border-border rounded transition-all focus:outline-none focus:border-accent focus:ring-2 focus:ring-accent-muted placeholder:text-text-muted placeholder:opacity-60 min-h-9 [&:empty]:before:content-[attr(data-placeholder)] [&:empty]:before:text-text-muted [&_a]:text-accent [&_a]:underline; }

  /* ===== SLUG EDITOR ===== */
  .slug-editor { @apply flex items-center gap-2 text-small text-text-muted py-1; }
  .slug-editor input { @apply flex-1 bg-transparent border-0 outline-none text-small text-accent py-1 placeholder:text-text-muted placeholder:opacity-60; }

  .user-picker-dropdown { @apply absolute z-50 mt-1 w-full rounded-lg border border-border bg-surface-1 shadow-lg overflow-hidden; }
  .user-picker-option { @apply flex items-center justify-between w-full px-3 py-2 text-sm text-left transition-colors hover:bg-surface-2 cursor-pointer; }

  /* ===== DISCUSSION ===== */
  .comment-thread { @apply flex flex-col gap-2 pl-4 border-l border-border-muted; }
  .comment-action { @apply flex items-center gap-2 text-text-muted hover:text-accent; }
  .comment-delete { @apply flex items-center gap-2 text-text-muted hover:text-error; }

  /* ===== IDEAS ===== */
  .ideas-panel { @apply flex flex-col gap-3; }
  .ideas-list { @apply flex flex-col rounded-lg overflow-hidden divide-y divide-border-muted; }
  .ideas-row { @apply flex items-center justify-between gap-4 px-4 py-3 bg-surface-1/60 transition-colors hover:bg-surface-2; }
  @media (max-width: 640px) {
    .ideas-row { @apply flex-col items-start gap-2; }
    .ideas-row-meta { @apply w-full justify-between; }
  }
  .ideas-row:first-child { @apply rounded-t-lg; }
  .ideas-row:last-child { @apply rounded-b-lg; }
  .ideas-row-main { @apply flex flex-col gap-1.5 min-w-0 flex-1; }
  .ideas-row-title { @apply font-medium truncate; }
  .ideas-row-badges { @apply flex items-center gap-1.5; }
  .ideas-row-meta { @apply flex items-center gap-4 text-sm text-text-muted shrink-0; }
  .ideas-row-replies { @apply flex items-center gap-1; }
  .ideas-row-activity { @apply text-text-muted; }

  /* ===== BOARD / IDEAS PIPELINE ===== */

  .status-tabs { @apply flex items-center gap-0 border-b border-border-muted overflow-x-auto; }
  .status-tabs::-webkit-scrollbar { display: none; }
  .status-tabs { scrollbar-width: none; }
  .status-tab { @apply px-3 py-2 text-small font-medium text-text-muted cursor-pointer transition-colors hover:text-text -mb-px border-b-2 border-transparent whitespace-nowrap shrink-0; }
  .board-columns { @apply grid gap-3 pb-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6; }
  .board-column { @apply flex flex-col rounded-lg bg-surface-1/40; }
  .board-column-head { @apply flex items-center justify-between gap-2 px-3 py-2.5 text-sm font-semibold border-b border-border-muted whitespace-nowrap; }
  .board-column-body { @apply flex flex-col gap-2 p-2 min-h-24; }
  .board-card { @apply flex flex-col gap-2 p-3 rounded-lg bg-surface-1 border border-border-muted/60 transition-all hover:bg-surface-2 hover:border-border-muted; }
  .board-card-title { @apply text-sm font-medium line-clamp-2; }
  .board-card-meta { @apply flex flex-wrap items-center gap-1.5; }
  .board-empty { @apply flex items-center justify-center py-8 text-sm text-text-muted italic; }

  /* ===== HISTORY / DIFF ===== */
  .restore-btn { @apply flex items-center gap-1 text-accent hover:text-accent-hover disabled:opacity-50; }

  /* ===== PAGE WITH INFOBOX LAYOUT ===== */
  .page-with-infobox {
    @apply grid gap-6;
    grid-template-columns: 1fr;
    grid-template-areas: "infobox" "content";

    @media (min-width: 768px) {
      grid-template-columns: 2fr 1fr;
      grid-template-areas: "content infobox";
    }

    > * { min-width: 0; }
    > .infobox { grid-area: infobox; }
    > .page-main-content { grid-area: content; }
  }

  /* Infobox sidebar */
  .infobox {
    @apply bg-surface-1 border border-border-muted rounded-lg overflow-hidden p-4;
    width: 100%;
    th { @apply bg-surface-2; }

    @media (min-width: 768px) {
      position: sticky;
      top: calc(var(--header-height) + 1.5rem);
      align-self: start;
      max-height: calc(100dvh - var(--header-height) - 3rem);
      overflow-y: auto;
    }
  }

  /* Infobox editor sidebar */
  .infobox-editor {
    grid-area: infobox;
    width: 100%;

    @media (min-width: 768px) {
      position: sticky;
      top: calc(var(--header-height) + 1.5rem);
      align-self: start;
      max-height: calc(100dvh - var(--header-height) - 3rem);
      overflow-y: auto;
    }
  }

  /* ===== FOOTER ===== */
  .footer { @apply flex items-center justify-between gap-4 flex-wrap border-t border-border-muted py-8 mt-8 text-text-muted; }

  /* ===== COLUMNS VIEW ===== */
  .columns-layout { @apply flex flex-col md:flex-row; }
  .column-view { @apply w-full md:flex-1 flex flex-col gap-4; }

  /* ===== EMPTY STATES ===== */
  .empty-state { @apply py-12 text-center; }




  /* ===== ASSET PRICE ===== */
  .asset-price { @apply bg-surface-1 border border-border-muted rounded-lg p-4 flex items-center gap-4; }
  .recent-pages-grid { @apply grid grid-cols-1 lg:grid-cols-2 gap-4; }

  /* ===== RSS FEED ===== */
  .rss-feed-scroll { @apply max-h-[494px] overflow-y-auto rounded-lg border border-border-muted bg-surface-0; }
  .rss-card { @apply bg-surface-1 border border-border-muted rounded-md overflow-hidden transition-colors hover:bg-surface-2; }
  .rss-card-image { @apply w-full h-[200px] relative; }
  .rss-card-body { @apply p-3.5; }
  .rss-card-title { @apply text-[15px] font-semibold mb-1.5 leading-snug; a { @apply text-accent no-underline hover:underline; } }
  .rss-card-meta { @apply text-xs text-text-muted mb-2; }
  .rss-card-source { @apply text-success font-medium; }
  .rss-card-desc { @apply text-text-muted text-[13px] leading-relaxed; }
}

radix-connect-button {
  --radix-connect-button-background: var(--color-accent);
  --radix-connect-button-background-hover: var(--color-accent-hover);
  --radix-connect-button-text: var(--color-text-inverted);
  --radix-connect-button-border-radius: var(--radius);
}
