/* src/styles/globals.css - Tailwind v4 Centralized Design System */

@import "tailwindcss";

@theme {
  /* Fonts */
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;

  /* Surface colors */
  --color-surface-0: #393e50;
  --color-surface-1: #444a5e;
  --color-surface-2: #4f5569;

  /* Border colors */
  --color-border: #52586e;
  --color-border-muted: #444a5e;

  /* Text colors */
  --color-text: #ffffff;
  --color-text-muted: #c5c9d6;
  --color-text-inverted: #393e50;

  /* Primary/Accent */
  --color-accent: #ff9da0;
  --color-accent-hover: #fff4cc;
  --color-accent-muted: rgba(255, 157, 160, 0.15);

  /* Semantic colors */
  --color-info: #ccd1ff;
  --color-success: #ccffda;
  --color-warning: #fff4cc;
  --color-error: #ff9da0;

  /* Typography scale */
  --text-h1: 1.8rem;
  --text-h2: 1.6rem;
  --text-h3: 1.4rem;
  --text-h4: 1.2rem;
  --text-body: 1rem;

  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;

  /* Border radius - 2 values only */
  --radius: 0.5rem;
  --radius-lg: 0.75rem;

  /* Shadow - single elevated shadow */
  --shadow: 0 8px 24px -4px rgba(0, 0, 0, 0.25);
}

@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
@keyframes slide-up { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

/* ===== BASE LAYER ===== */
@layer base {
  html {
    font-size: 16px;
    line-height: 1.2;
    -webkit-font-smoothing: antialiased;
    scroll-behavior: smooth;
  }

  body {
    background-color: var(--color-surface-0);
    color: var(--color-text);
    font-size: var(--text-body);
    min-height: 100vh;
  }

  h1 { font-size: var(--text-h1); font-weight: 700; margin-top: 2rem; margin-bottom: 1rem; }
  h2 { font-size: var(--text-h2); font-weight: 500; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 2px solid var(--color-border); scroll-margin-top: 5rem; }
  h3 { font-size: var(--text-h3); font-weight: 400; margin-top: 1.5rem; margin-bottom: 1rem; scroll-margin-top: 5rem; }
  h4 { font-size: var(--text-h4); font-weight: 300; margin-top: 1rem; margin-bottom: 1rem; scroll-margin-top: 5rem;  }
  h1:first-child, h2:first-child, h3:first-child, h4:first-child { margin-top: 0; }

  p { margin-bottom: 1rem; }
  p:last-child { margin-bottom: 0; }

  ul, ol { margin-bottom: 1rem; padding-left: 2rem; }
  ul { list-style-type: disc; }
  ol { list-style-type: decimal; }
  li { margin-bottom: 0.25rem; }
  li:last-child { margin-bottom: 0; }
  ul ul, ol ol, ul ol, ol ul { margin-top: 0.25rem; margin-bottom: 0; }

  a { color: inherit; text-decoration: none; }

  tbody {
    background: var(--color-surface-2);
    td { border: none !important; vertical-align: baseline !important; }
    tr:first-child td:only-child { border-radius: var(--radius) var(--radius) 0 0; }
    tr:last-child td:first-child:not(:only-child) { border-radius: 0 0 0 var(--radius); }
    tr:last-child td:last-child:not(:only-child) { border-radius: 0 0 var(--radius) 0; }
    tr:last-child td:only-child { border-radius: 0 0 var(--radius) var(--radius); }
    tr:hover { background-color: #ddd; }
  }

  ::selection { background-color: var(--color-accent-muted); color: var(--color-text); }
  :focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: var(--color-surface-1); }
  ::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--color-text-muted); }

  input, textarea, select { font: inherit; color: inherit; }
  hr { border: none; border-top: 1px solid var(--color-border-muted); }

  code {
    font-size: 0.9em;
    padding: 0.125rem 0.375rem;
    background: var(--color-surface-2);
    border-radius: var(--radius);
  }

  pre {
    font-size: var(--text-body);
    background: var(--color-surface-1);
    border: 1px solid var(--color-border-muted);
    border-radius: var(--radius-lg);
    padding: var(--space-md);
    overflow-x: auto;
  }

  pre code { padding: 0; background: none; }

  blockquote {
    border-left: 4px solid var(--color-accent);
    padding-left: var(--space-md);
    padding-top: var(--space-xs);
    padding-bottom: var(--space-xs);
    font-style: italic;
    color: var(--color-text-muted);
  }

  /* Tiptap Editor Styles */
  .tiptap-editor .tiptap {
    outline: none;
  }

  .tiptap-editor .tiptap p {
    margin-bottom: 0.75rem;
  }

  .tiptap-editor .tiptap p:last-child {
    margin-bottom: 0;
  }

  .tiptap-editor .tiptap h2 {
    font-size: var(--text-h2);
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .tiptap-editor .tiptap h3 {
    font-size: var(--text-h3);
    font-weight: 600;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
  }

  .tiptap-editor .tiptap h2:first-child,
  .tiptap-editor .tiptap h3:first-child {
    margin-top: 0;
  }

  .tiptap-editor .tiptap ul,
  .tiptap-editor .tiptap ol {
    padding-left: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .tiptap-editor .tiptap ul {
    list-style-type: disc;
  }

  .tiptap-editor .tiptap ol {
    list-style-type: decimal;
  }

  .tiptap-editor .tiptap li {
    margin-bottom: 0.25rem;
  }

  .tiptap-editor .tiptap code {
    font-size: 0.9em;
    padding: 0.125rem 0.375rem;
    background: var(--color-surface-2);
    border-radius: var(--radius);
  }

  .tiptap-editor .tiptap blockquote {
    border-left: 4px solid var(--color-accent);
    padding-left: var(--space-md);
    font-style: italic;
    color: var(--color-text-muted);
    margin: 0.75rem 0;
  }

  .tiptap-editor .tiptap a {
    color: var(--color-accent);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .tiptap-editor .tiptap a:hover {
    color: var(--color-accent-hover);
  }

  .tiptap-editor .tiptap p.is-editor-empty:first-child::before {
    content: attr(data-placeholder);
    float: left;
    color: var(--color-text-muted);
    opacity: 0.6;
    pointer-events: none;
    height: 0;
  }
}

/* ===== COMPONENT LAYER ===== */
@layer components {
  /* Stack layouts */
  .stack { display: flex; flex-direction: column; gap: var(--space-md); }
  .stack-xs { display: flex; flex-direction: column; gap: var(--space-xs); }
  .stack-sm { display: flex; flex-direction: column; gap: var(--space-sm); }
  .stack-lg { display: flex; flex-direction: column; gap: var(--space-lg); }

  /* Row layouts */
  .row { display: flex; align-items: center; gap: var(--space-sm); }
  .row-md { display: flex; align-items: center; gap: var(--space-md); }
  .spread { display: flex; align-items: center; justify-content: space-between; gap: var(--space-md); flex-wrap: wrap; }
  .center { display: flex; align-items: center; justify-content: center; }
  .wrap { flex-wrap: wrap; }

  /* Text utilities */
  .text-muted { color: var(--color-text-muted); }
  .text-accent { color: var(--color-accent); }
  .text-info { color: var(--color-info); }
  .text-small { font-size: var(--text-small); }

  /* Links */
  .link { color: var(--color-accent); text-decoration: underline; text-underline-offset: 2px; transition: color 0.15s; }
  .link:hover { color: var(--color-accent-hover); }
  .link-muted { color: var(--color-text-muted); transition: color 0.15s; }
  .link-muted:hover { color: var(--color-text); }

  /* Surfaces */
  .surface { background: var(--color-surface-1); border: 1px solid var(--color-border-muted); border-radius: var(--radius-lg); }
  .surface-interactive {
    background: var(--color-surface-1);
    border: 1px solid var(--color-border-muted);
    border-radius: var(--radius-lg);
    transition: border-color 0.15s, transform 0.15s, box-shadow 0.15s;
  }
  .surface-interactive:hover { border-color: var(--color-accent); transform: translateY(-2px); box-shadow: var(--shadow); }
  .panel { background: var(--color-surface-0); border: 1px solid var(--color-border-muted); border-radius: var(--radius-lg); padding: var(--space-lg); }

  /* Buttons */
  .icon-btn {
    padding: var(--space-sm);
    border-radius: var(--radius);
    transition: background-color 0.15s;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  .icon-btn:hover { background: var(--color-surface-2); }

  /* Inputs */
  .input {
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    background: var(--color-surface-0);
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
    transition: border-color 0.15s, box-shadow 0.15s;
  }
  .input:focus { outline: none; border-color: var(--color-accent); box-shadow: 0 0 0 2px var(--color-accent-muted); }
  .input::placeholder { color: var(--color-text-muted); opacity: 0.6; }
  .input-ghost { width: 100%; background: transparent; border: none; outline: none; }
  .input-ghost::placeholder { color: var(--color-text-muted); opacity: 0.6; }

  /* Callout */
  .callout {
    display: flex;
    gap: var(--space-md);
    padding: var(--space-md);
    border-radius: var(--radius-lg);
    border: 1px solid rgba(204, 209, 255, 0.3);
    background: rgba(204, 209, 255, 0.1);
  }

  /* Dropdown */
  .dropdown {
    position: absolute;
    right: 0;
    top: 100%;
    margin-top: var(--space-sm);
    min-width: 12rem;
    background: var(--color-surface-1);
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: var(--space-xs) 0;
    z-index: 50;
  }
  .dropdown-item {
    width: 100%;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm) var(--space-md);
    text-align: left;
    transition: background-color 0.15s;
  }
  .dropdown-item:hover { background: var(--color-surface-2); }

  /* Badges */
  .badge {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem var(--space-sm);
    font-size: var(--text-small);
    font-weight: 500;
    border-radius: 9999px;
    background: var(--color-surface-2);
    color: var(--color-text-muted);
  }
  .badge-accent { background: var(--color-accent-muted); color: var(--color-accent); }

  /* Skeleton */
  .skeleton { background: var(--color-surface-1); border-radius: var(--radius-lg); animation: pulse 2s infinite; }

  /* Utility */
  .sticky-card { position: sticky; top: 5rem; }
  .shrink-0 { flex-shrink: 0; }
  .min-w-0 { min-width: 0; }
  .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
}

/* Radix Connect Button */
radix-connect-button {
  --radix-connect-button-background: var(--color-accent);
  --radix-connect-button-background-hover: var(--color-accent-hover);
  --radix-connect-button-text: var(--color-text-inverted);
  --radix-connect-button-border-radius: var(--radius);
}